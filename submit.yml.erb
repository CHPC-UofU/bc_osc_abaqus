<%-
  num_nodes = bc_num_slots.blank? ? 1 : bc_num_slots.to_i
-%>
---
batch_connect:
  template: "vnc"
script:
  native:
    resources:
      <%- if node_type == "vis" -%>
      nodes: "<%= num_nodes %>:ppn=28:vis:gpus=1"
      software: "abaqus+<%= (5 * (num_nodes * 28) ** 0.422).floor %>"
      <%- elsif node_type == "hugemem" -%>
      nodes: "<%= num_nodes %>:ppn=48:hugemem"
      software: "abaqus+<%= (5 * (num_nodes * 48) ** 0.422).floor %>"
      <%- else -%>
      nodes: "<%= num_nodes %>:ppn=28"
      software: "abaqus+<%= (5 * (num_nodes * 28) ** 0.422).floor %>"
      <%- end -%>
